<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order History - Happie</title>
    <link rel="icon" type="image/png" href="../Home/pageImages/imagelogo.png">
    <link rel="stylesheet" href="history.css">
    <script src="../auth.js" defer></script>
    <script src="history.js" defer></script>
</head>
<body>
    <div class="topHeader">
       <a href="../Home/home.html" class="logoLink">
           <img src="pageImages/logoImage.png" alt="headerImage" class="headerImage">
       </a>
       <a href="#" class="locationLink">
           <span class="locationIconWrap">
               <img src="pageImages/icons8location.png?v=3" alt="Location Icon" class="locationIcon" width="32" height="32">
           </span>
                           <span id="userLocation" class="locationText">...</span>
       </a>
        <div class="searchContainer">
            <input type="text" class="searchBar" placeholder="Search for products, stores, or services..." aria-label="Search products">
            <button class="searchButton" aria-label="Search"> <img src="pageImages/icon8Searchs.png" alt="Search icon"> </button>
        </div>
        <div class="iconLinks">
            <a href="#" class="iconLink">
                <img src="pageImages/icons8myaccount.png" alt="Icon 1" class="linkIcon">
                <span class="linkText">My Account</span>
            </a>
            <a href="../Cart/cart.html" class="iconLink">
                <img src="pageImages/icons8cart..gif" alt="Icon 2" class="linkIcon">
                <span class="linkText">Cart</span>
                <span class="cart-badge" id="cartBadge" style="display: none;">0</span>
            </a>
            <a href="history.html" class="iconLink active">
                <img src="pageImages/icons8order.png" alt="Icon 3" class="linkIcon">
                <span class="linkText">History</span>
            </a>
        </div>
    </div>

    <!-- Main History Container -->
    <div class="historyContainer">
        <div class="historyHeader">
            <h1>Order History</h1>
            <p id="historyStatus">Loading your orders...</p>
        </div>

        <!-- History Content -->
        <div class="historyContent">
            <!-- Order History Section -->
            <div class="orderHistorySection">
                <div class="historyHeaderControls">
                    <h2>My Orders</h2>
                    <div class="filterControls">
                        <select id="statusFilter" class="statusFilter">
                            <option value="all">All Orders</option>
                            <option value="pending">Pending</option>
                            <option value="processing">Processing</option>
                            <option value="shipped">Shipped</option>
                            <option value="delivered">Delivered</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                        <button id="refreshBtn" class="refreshBtn">Refresh</button>
                    </div>
                </div>
                
                <!-- Orders Container -->
                <div id="ordersContainer" class="ordersContainer">
                    <!-- Orders will be dynamically inserted here -->
                </div>

                <!-- Empty History Message -->
                <div id="emptyHistoryMessage" class="emptyHistoryMessage" style="display: none;">
                    <div class="emptyHistoryIcon">ðŸ“¦</div>
                    <h3>No orders yet</h3>
                    <p>You haven't placed any orders yet. Start shopping to see your order history here!</p>
                    <a href="../Farm and Product selected details/product.html" class="startShoppingBtn">Start Shopping</a>
                </div>

                <!-- Loading Spinner -->
                <div id="loadingSpinner" class="loadingSpinner" style="display: none;">
                    <div class="spinner"></div>
                    <p>Loading your orders...</p>
                </div>
            </div>


        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderModal" class="modal">
        <div class="modalContent orderModalContent">
            <div class="modalHeader">
                <h2>Order Details</h2>
                <span class="closeModal">&times;</span>
            </div>
            <div class="modalBody">
                <div id="orderDetailsContent">
                    <!-- Order details will be dynamically inserted here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div id="notification" class="notification">
        <span id="notificationText"></span>
        <button class="notificationClose">&times;</button>
    </div>

    <!-- Authentication Modal -->
    <div id="authModal" class="modal">
        <div class="modalContent">
            <div class="modalHeader">
                <h2 id="authTitle">Sign In</h2>
                <span class="closeModal">&times;</span>
            </div>
            <div class="modalBody">
                <div id="authFormContainer">
                    <form id="authForm" class="authForm">
                        <div class="formGroup" id="authNameGroup" style="display: none;">
                            <label for="authName">Full Name *</label>
                            <input type="text" id="authName" name="name">
                        </div>
                        <div class="formGroup">
                            <label for="authEmail">Email Address *</label>
                            <input type="email" id="authEmail" name="email" required>
                        </div>
                        <div class="formGroup" id="authPhoneGroup" style="display: none;">
                            <label for="authPhone">Phone Number *</label>
                            <input type="tel" id="authPhone" name="phone">
                        </div>
                        <div class="formGroup">
                            <label for="authPassword">Password *</label>
                            <input type="password" id="authPassword" name="password" required>
                        </div>
                        <div class="formGroup" id="confirmPasswordGroup" style="display: none;">
                            <label for="authConfirmPassword">Confirm Password *</label>
                            <input type="password" id="authConfirmPassword" name="confirmPassword">
                        </div>
                        <div class="authActions">
                            <button type="submit" id="authSubmitBtn" class="authSubmitBtn">Sign In</button>
                            <button type="button" id="toggleAuthBtn" class="toggleAuthBtn">Create Account</button>
                        </div>
                    </form>
                </div>
                
                <div id="userInfo" style="display: none;">
                    <div class="userDetails">
                        <p><strong>Name:</strong> <span id="userName">Not signed in</span></p>
                        <p><strong>Email:</strong> <span id="userEmail">Not signed in</span></p>
                        <p><strong>Phone:</strong> <span id="userPhone">Not signed in</span></p>
                    </div>
                    <div class="accountActions">
                        <button id="editAccountBtn" class="editAccountBtn">Edit Account</button>
                        <button id="signOutBtn" class="signOutBtn">Sign Out</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footerSection">
        <div class="footerContent">
            <div class="footerLogo">
                <img src="pageImages/logoImage.png" alt="Happie Logo" class="footerLogoImage">
                <h2> </h2>
                <p> </p>
            </div>
            <div class="footerLinks">
                <div class="linkColumn">
                    <h4>Make Money With Us</h4>
                    <a href="#">Sell on Happie</a>
                    <a href="#">Partner with Us</a>
                    <a href="#">Join Happie Team</a>
                </div>
                <div class="linkColumn">
                    <h4>Services</h4>
                    <a href="#">Happie E-commerce</a>
                    <a href="#">From Farm To Me</a>
                    <a href="#">Flash Sales</a>
                    <a href="#">24hrs Delivery</a>
                    <a href="#">Restaurants Near Me</a>
                    <a href="#">Errands</a>
                    <a href="#">Healthcare & Pharmacy</a>
                    <a href="#">Phones & Gadgets</a>
                    <a href="#">Leisure & Fun</a>
                    <a href="#">Beauty & Personal Care</a>
                    <a href="#">Movies & Cinemas</a>
                    <a href="#">Plane & Bus Tickets</a>
                    <a href="#">Hotel Bookings</a>
                    <a href="#">Apartments For Rent</a>
                    <a href="#">Artisans</a>
                    <a href="#">Car Maintenance</a>
                    <a href="#">Learning</a>
                    <a href="#">Stores near me</a>
                    <a href="#">Mobile Recharge</a>
                    <a href="#">Others</a>
                </div>
                <div class="linkColumn">
                    <h4>Support</h4>
                    <a href="#">Help Center</a>
                    <a href="#">Contact Us</a>
                    <a href="#">Track Order</a>
                </div>
            </div>
        </div>
        <div class="footerBottom">
            <p>&copy; 2025 Happie. All rights reserved. | A platform for all your needs.</p>
        </div>
    </footer>
</body>
</html>